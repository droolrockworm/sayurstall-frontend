
<ion-content *ngIf="this.controller" [ngClass]="{modalopen:this.modalopen,modalclosed:!this.modalopen}">

  <ion-card class = "detail">
    <button id='display' class="button-left" color="primary" left [ngClass]="{ 'active' : ( 0 == getDisplayType() ) }" (click)="selectView(0)">
      <i class='material-icons'>
          perm_device_information
      </i>
    </button>
    <!-- <button id='schedules' class="button-left" color="primary" left [ngClass]="{ 'active' : ( 1 == getDisplayType() ) }" (click)="selectView(1)">
      <i class='material-icons'>
          schedule
      </i>
    </button> -->
    <button id='settings' class="button-left" color="primary" left [ngClass]="{ 'active' : ( 2 == getDisplayType() ) }" (click)="selectView(2)">
      <i class='material-icons'>
          settings
      </i>
    </button>
    <!-- <button id="modes" class="button-left" [ngClass]="{ 'active' : ( 3 == getDisplayType() ) }" (click)="selectView(3)">
      <i class='material-icons'>
          grid_on
      </i>
    </button> -->
    <button id="history" class="button-left" [ngClass]="{ 'active' : ( 4 == getDisplayType() ) }" (click)="selectView(4)">
      <i class='material-icons'>
          history
      </i>
    </button>
    <ion-title style = "color:black">
      {{this.controller.name | uppercase}}
      <div style = "font-size: 2vh;">
        {{this.auth.formatName(this.controller.type)}} - {{this.auth.formatName(this.controller.subtype)}}
        </div>

    </ion-title>

    <div class="grid" [ngSwitch]="getDisplayType()">
    <ng-container *ngSwitchCase="0">



      <div class = "detail">
        <div class = "grid">


          <div class = "panel">

              <div class = "lgtitle">

                <div>
                  INPUT

                </div>
              </div>
              <div *ngIf = "this.controller.status">
                <div *ngIf = "this.controller.type == 'map_icon'"class = "lgstate">
                  {{this.controller.status.sockets.input}}

                </div>
                <div *ngIf = "this.controller.type == 'kw_meter'"class = "lgstate">
                  {{this.controller.status.d}}

                </div>
              </div>
              <div *ngIf = "!this.controller.status" class = "lgstate">
                --
              </div>
          </div>

        </div>
      </div>
  </ng-container>

  <ng-container *ngSwitchCase="1">
    <div class="schedules_container">
      <app-controller-schedules [controller]="controller"></app-controller-schedules>
    </div>
  </ng-container>

  <div  *ngSwitchCase="2">
    <app-controller-settings [controller]="controller"></app-controller-settings>

    <!-- <div *ngIf="!selectedSetting">
      <div class="settings_container">
            <div *ngFor="let item of settings; let idx = index;">
              <app-controller-settings-item #settingsItem [parent]="this" [setting]="item" [index]="idx"></app-controller-settings-item>
            </div>
      </div>
    </div> -->
    <!-- <div class="settings_container" *ngIf="selectedSetting">
        <div class="control">
          <button class="close_button" ion-button (click) = "closeSelected()">
            <i  name="close-circle"></i>
          </button>
          <button [disabled]="!selectedSetting.touched" class="save_button">
            <i  name="save" (click)="saveSetting()"></i>

          </button>
        </div>
        <div class = "settings-item">
          <app-controller-settings-item [parent]="this" [setting]="selectedSetting" [index]="selectedIndex"></app-controller-settings-item>
        </div>
    </div> -->

  </div>
  <ng-container *ngSwitchCase="3">
    <!-- <div>
      nothing to see here!
    </div> -->
  </ng-container>

  <div  style = "width:100vw"*ngSwitchCase="4">
    <app-history [controller]="controller"></app-history>
    <!-- <canvas style = "height: 100%; width: 100%" #graphCanvas></canvas> -->
  </div>
  </div>


  </ion-card>
</ion-content>
